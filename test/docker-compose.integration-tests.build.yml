version: "3.8"
# environment variable PWD is assumed to be grapl root directory

services:
  rust-integration-tests:
    image: rust-integration-tests:${TAG}
    build:
      context: ${PWD}/src
      dockerfile: rust/Dockerfile
      target: integration-tests

  python-integration-tests:
    image: python-integration-tests:${TAG}
    build:
      context: ${PWD}
      dockerfile: src/python/Dockerfile
      target: integration-tests

  e2e-tests:
    image: e2e-tests:${TAG}
    build:
      context: .
      dockerfile: ./src/python/Dockerfile
      target: e2e-tests
